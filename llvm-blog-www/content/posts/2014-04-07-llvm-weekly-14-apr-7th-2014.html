---
author: Unknown
blogger_id: tag:blogger.com,1999:blog-6088150582281556517.post-738893096723572753
blogger_orig_url: http://blog.llvm.org/2014/04/llvm-weekly-14-apr-7th-2014.html
date: "2014-04-07T06:47:00Z"
modified_time: "2014-04-07T06:47:46.681-07:00"
tags: ["llvmweekly"]
title: 'LLVM Weekly - #14, Apr 7th 2014'
aliases:
 - /2014/04/llvm-weekly-14-apr-7th-2014.html
---

<p>Welcome to the fourteenth issue of LLVM Weekly, a weekly newsletter (published  every Monday) covering developments in LLVM, Clang, and related projects. LLVM Weekly is brought to you by <a href="http://asbradbury.org">Alex Bradbury</a>. Subscribe to future issues at <a href="http://llvmweekly.org">http://llvmweekly.org</a> and pass it on to anyone  else you think may be interested. Please send any tips or feedback to  <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;">&#97;&#115;&#98;&#64;&#97;&#115;&#98;&#114;&#97;&#100;&#98;&#117;&#114;&#121;&#46;&#111;&#114;&#103;</a>, or <a href="https://twitter.com/llvmweekly">@llvmweekly</a> or <a href="https://twitter.com/asbradbury">@asbradbury</a> on Twitter.</p><p>There seems to have been a flood of LLVM-related news this week, hopefully  I've managed to collect it all. If you're in London next week, you might be  interested in attending <a href="http://www.meetup.com/X-Dev-London/events/174666532/">my introductory LLVM  talk</a> on Wednesday. Abstract is <a href="http://pastebin.com/StSzTzMv">here</a>.</p><p>EuroLLVM is of course taking place on Monday and Tuesday of this week. Sadly I  won't be in attendance. If anyone is blogging the event, please do send me  links.</p> <p>The canonical home for this issue <a href="http://llvmweekly.org/issue/14">can be found here at llvmweekly.org</a>. </p>  <a name='more'></a> <h3>News and articles from around the web</h3><p>The LLVM-related news that has made the biggest splash this week is surely the  <a href="https://tech.dropbox.com/2014/04/introducing-pyston-an-upcoming-jit-based-python-implementation/">announcement of Pyston, a JIT for Python targeting  LLVM</a>. More technical details are <a href="https://github.com/dropbox/pyston#technical-features">available on the Github  repo</a>. For many this  immediately conjures up memories of the <a href="http://code.google.com/p/unladen-swallow/">Unladen Swallow  project</a>, started by Google  engineers with the same aim of JITting Python with LLVM. That project was  eventually unsuccessful, but it's unfair to the authors of Pyston to assume it  will have the same fate. It's unclear how much developer time Dropbox are  contributing to Pyston. They clearly have a lot of work to do, though it's no  secret that <a href="http://lists.cs.uiuc.edu/pipermail/llvmdev/2013-October/066573.html">Apple are also looking to target LLVM from  JavaScript</a>  which means they're not the only developers working in this area. Kevin  Modzelewski <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71870">shared some more  info</a> on the  LLVM mailing list which details some of the LLVM work they've implemented so  far (including some initial escape analysis for GCed memory).</p><p>An independent, non-profit LLVM Foundation <a href="http://blog.llvm.org/2014/04/the-llvm-foundation.html">is to be  formed</a>. As a vendor  neutral organisation it will represent the community interest and aims to be  set up by the end of the year.The initial board of directors will be Vikram  Adve, Chandler Carruth, Doug Gregor, David Kipping, Anton Korobeynikov, Chris  Lattner, Tanya Lattner, and Alex Rosenberg.</p><p>Rust 0.10 <a href="https://mail.mozilla.org/pipermail/rust-dev/2014-April/009387.html">has been  released</a>. See also the discussion on <a href="https://news.ycombinator.com/item?id=7524945">Hacker  News</a> and  <a href="http://www.reddit.com/r/programming/comments/224gh3/rust_010_released/">Reddit</a>. Rust is a systems programming language from Mozilla which uses LLVM as its  code generator backend.</p><p>The <a href="http://dagger.repzret.org/">Dagger</a> LLVM-based decompilation framework  has <a href="http://dagger.repzret.org/update-a-sneak-peek-of-the-source/">released its  source</a> as well  as publishing a series of five articles documenting its implementation  approach and documenting the next steps or 'TODOs'.</p><p>An <a href="https://github.com/AccelerateHS/accelerate-llvm">LLVM backend for the Accelerate Array  Language</a> has been released. It compiles Accelerate code to LLVM IR and can target multicore CPUs as well  as NVIDIA GPUs.</p><p>The <a href="https://github.com/gannimo/MalDiv/raw/master/paper/talk_payerm_syscan14.pdf">PDF slides</a>for a recent talk about the LLVM-based <a href="https://github.com/gannimo/MalDiv">MalDiv</a> diversifying compiler have been  published. Such a tool effectively defeats signature-based matching of  malware.</p><h3>On the mailing lists</h3><ul><li><p>James Molloy from ARM has been looking at the recently open sourced ARM64  backend from Apple, and has come to the conclusion that <a href="article.gmane.org/gmane.comp.compilers.llvm.devel/71737">it's easier to use  ARM64 as a base an merge in from  AArch64</a>. The key  justification is that ARM64 backend is more performant but has some  correctness issues, and porting performance fixes is more difficult than  correctness. There seems to be agreement from the followup responses. Bradley  Smith reports <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71861">good progress on fixing observed correctness issues and some  interesting performance  results</a>. Of  interest to those attending EuroLLVM this week, there will be discussions on  Monday and after the main conference on Wednesday (details  <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71947">here</a>).</p></li><li><p>Requests for patches to be included in LLVM/Clang 3.4.1 have started to come  in. These include <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71788">a large number of AArch64  patches</a> (plus  <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71849">another</a>),  plus some <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71809">assorted  bugfixes</a>.</p></li><li><p>Reid Kleckner has <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71775">proposed a new tail call  marker</a>,  'musttail' which guarantees that tail call optimization will occur.</p></li><li><p>Shankar Easwaran starts a discussion on <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71852">adding support to lld for  demangling  symbols</a>.</p></li><li><p>Jeroen Dobbelaere has an <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71881">interesting  problem</a> with  an architecture he is targeting. The architecture has 64-bit registers, but  the pointer size is always 32-bits. JF Bastien suggests <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71923">this is similar to  PNaCl and the x32  ABI</a>.</p></li><li><p>Peter Collingbourne <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71773">proposes an IR extension for loads/stores with  deterministic trap/unwind  behaviour</a>. The aim is to support zero cost exception handling for operations that may  trap. The proposal comes with initial patches, though Andrew Trick <a href="http://article.gmane.org/gmane.comp.compilers.llvm.devel/71934">questions  whether adding new IR instructions is the right  approach</a>.</p></li><li><p>The LLVM project Phabricator instance has <a href="http://article.gmane.org/gmane.comp.compilers.clang.devel/35992">been moved to  reviews.llvm.org</a>. Currently links to the old one are broken, but hopefully a redirect will be  set up. By the time you read this I should have updated all broken links from  llvmweekly.org.</p></li></ul><h3>LLVM commits</h3><ul><li><p>MipsAsmParser and MipsOperand was rewritten. The improvements are documented  in the commit message. <a href="http://reviews.llvm.org/rL205292">r205292</a>.</p></li><li><p>The ARM backend gained support for segmented stacks. <a href="http://reviews.llvm.org/rL205430">r205430</a>.</p></li><li><p>Windows on ARM support is now possible with the MachineCode layer. <a href="http://reviews.llvm.org/rL205459">r205459</a>.</p></li><li><p>TargetLowering gained a hook to control when <code>BUILD_VECTOR</code> might be  expanded using shuffles. <a href="http://reviews.llvm.org/rL205230">r205230</a>. Targets might choose to  use ExpandBVWithShuffles which was added in a later commit. <a href="http://reviews.llvm.org/rL205243">r205243</a>.</p></li><li><p>X86TargetTransformInfo gained getUnrollingPreferences, which is used by the  generic loop unroller. This helps to optimise use of the micro-op caches on  X86. This produced 7.5%-15% speedups in the TSVC benchmark suite. <a href="http://reviews.llvm.org/rL205348">r205348</a>.</p></li><li><p>ARM gained a nice little optimisation pass that removes duplicated DMB  instructions. <a href="http://reviews.llvm.org/rL205409">r205409</a>.</p></li><li><p>Atomic ldrex/strex loops are now expanded in IR rather than at MachineInstr  emission time. This cleans up code, but should also make future optimisations  easier. <a href="http://reviews.llvm.org/rL205525">r205525</a>.</p></li></ul><h3>Clang commits</h3><ul><li><p>The clang static analyzer gained double-unlock detection in  PthreadLockChecker, as well as a check for using locks after they are  destroyed. <a href="http://reviews.llvm.org/rL205274">r205274</a>,  <a href="http://reviews.llvm.org/rL205275">r205275</a>.</p></li><li><p>The OpenMP 'copyin' clause was implemented. <a href="http://reviews.llvm.org/rL205164">r205164</a>.</p></li><li><p>The 'optnone' attribute was added, which suppresses most optimisations on a  function. <a href="http://reviews.llvm.org/rL205255">r205255</a>.</p></li><li><p>The heuristics for choosing methods to suggest as corrections were improved,  to ignore methods that obviously won't work. <a href="http://reviews.llvm.org/rL205653">r205653</a>.</p></li><li><p>The 'BitwiseConstraintManager' idea was added to the open projects page. <a href="http://reviews.llvm.org/rL205666">r205666</a>.</p></li></ul><h3>Other project commits</h3><ul><li><p>AddressSanitizer can now be used as a shared library on Linux. <a href="http://reviews.llvm.org/rL205308">r205308</a>.</p></li><li><p>compiler-rt gained support for IEEE754 quad precision comparison functions. <a href="http://reviews.llvm.org/rL205312">r205312</a>.</p></li><li><p>lld now supports <code>.gnu.linkonce</code> sections. <a href="http://reviews.llvm.org/rL205280">r205280</a>.</p></li></ul>
