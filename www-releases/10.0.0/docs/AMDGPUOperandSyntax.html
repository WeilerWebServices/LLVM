

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Syntax of AMDGPU Instruction Operands &#8212; LLVM 10 documentation</title>
    <link rel="stylesheet" href="_static/llvm-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="AMDGPU Instruction Syntax" href="AMDGPUInstructionSyntax.html" />
    <link rel="prev" title="Syntax of AMDGPU Instruction Modifiers" href="AMDGPUModifierSyntax.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="AMDGPUInstructionSyntax.html" title="AMDGPU Instruction Syntax"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="AMDGPUModifierSyntax.html" title="Syntax of AMDGPU Instruction Modifiers"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" >User Guides</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="AMDGPUUsage.html" accesskey="U">User Guide for AMDGPU Backend</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#irc">IRC</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project//">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/AMDGPUOperandSyntax.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="syntax-of-amdgpu-instruction-operands">
<h1>Syntax of AMDGPU Instruction Operands<a class="headerlink" href="#syntax-of-amdgpu-instruction-operands" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#conventions" id="id1">Conventions</a></li>
<li><a class="reference internal" href="#operands" id="id2">Operands</a><ul>
<li><a class="reference internal" href="#v" id="id3">v</a></li>
<li><a class="reference internal" href="#a" id="id4">a</a></li>
<li><a class="reference internal" href="#s" id="id5">s</a></li>
<li><a class="reference internal" href="#trap" id="id6">trap</a></li>
<li><a class="reference internal" href="#ttmp" id="id7">ttmp</a></li>
<li><a class="reference internal" href="#tba" id="id8">tba</a></li>
<li><a class="reference internal" href="#tma" id="id9">tma</a></li>
<li><a class="reference internal" href="#flat-scratch" id="id10">flat_scratch</a></li>
<li><a class="reference internal" href="#xnack" id="id11">xnack</a></li>
<li><a class="reference internal" href="#vcc" id="id12">vcc</a></li>
<li><a class="reference internal" href="#m0" id="id13">m0</a></li>
<li><a class="reference internal" href="#exec" id="id14">exec</a></li>
<li><a class="reference internal" href="#vccz" id="id15">vccz</a></li>
<li><a class="reference internal" href="#execz" id="id16">execz</a></li>
<li><a class="reference internal" href="#scc" id="id17">scc</a></li>
<li><a class="reference internal" href="#lds-direct" id="id18">lds_direct</a></li>
<li><a class="reference internal" href="#null" id="id19">null</a></li>
<li><a class="reference internal" href="#inline-constant" id="id20">inline constant</a><ul>
<li><a class="reference internal" href="#iconst" id="id21">iconst</a></li>
<li><a class="reference internal" href="#fconst" id="id22">fconst</a></li>
<li><a class="reference internal" href="#ival" id="id23">ival</a></li>
</ul>
</li>
<li><a class="reference internal" href="#literal" id="id24">literal</a></li>
<li><a class="reference internal" href="#uimm8" id="id25">uimm8</a></li>
<li><a class="reference internal" href="#uimm32" id="id26">uimm32</a></li>
<li><a class="reference internal" href="#uimm20" id="id27">uimm20</a></li>
<li><a class="reference internal" href="#uimm21" id="id28">uimm21</a></li>
<li><a class="reference internal" href="#simm21" id="id29">simm21</a></li>
<li><a class="reference internal" href="#off" id="id30">off</a></li>
</ul>
</li>
<li><a class="reference internal" href="#numbers" id="id31">Numbers</a><ul>
<li><a class="reference internal" href="#integer-numbers" id="id32">Integer Numbers</a></li>
<li><a class="reference internal" href="#floating-point-numbers" id="id33">Floating-Point Numbers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expressions" id="id34">Expressions</a><ul>
<li><a class="reference internal" href="#absolute-expressions" id="id35">Absolute Expressions</a></li>
<li><a class="reference internal" href="#relocatable-expressions" id="id36">Relocatable Expressions</a></li>
<li><a class="reference internal" href="#operands-and-operations" id="id37">Operands and Operations</a></li>
<li><a class="reference internal" href="#syntax-of-expressions" id="id38">Syntax of Expressions</a></li>
<li><a class="reference internal" href="#binary-operators" id="id39">Binary Operators</a></li>
<li><a class="reference internal" href="#unary-operators" id="id40">Unary Operators</a></li>
<li><a class="reference internal" href="#symbols" id="id41">Symbols</a></li>
</ul>
</li>
<li><a class="reference internal" href="#type-and-size-conversion" id="id42">Type and Size Conversion</a><ul>
<li><a class="reference internal" href="#conversion-of-integer-values" id="id43">Conversion of Integer Values</a></li>
<li><a class="reference internal" href="#conversion-of-floating-point-values" id="id44">Conversion of Floating-Point Values</a></li>
<li><a class="reference internal" href="#conversion-of-relocatable-values" id="id45">Conversion of Relocatable Values</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="conventions">
<h2><a class="toc-backref" href="#id1">Conventions</a><a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h2>
<p>The following notation is used throughout this document:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Notation</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>{0..N}</td>
<td>Any integer value in the range from 0 to N (inclusive).</td>
</tr>
<tr class="row-odd"><td>&lt;x&gt;</td>
<td>Syntax and meaning of <em>x</em> is explained elsewhere.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="operands">
<span id="amdgpu-syn-operands"></span><h2><a class="toc-backref" href="#id2">Operands</a><a class="headerlink" href="#operands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v">
<span id="amdgpu-synid-v"></span><h3><a class="toc-backref" href="#id3">v</a><a class="headerlink" href="#v" title="Permalink to this headline">¶</a></h3>
<p>Vector registers. There are 256 32-bit vector registers.</p>
<p>A sequence of <em>vector</em> registers may be used to operate with more than 32 bits of data.</p>
<p>Assembler currently supports sequences of 1, 2, 3, 4, 8 and 16 <em>vector</em> registers.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>v</strong>&lt;N&gt;</td>
<td><p class="first">A single 32-bit <em>vector</em> register.</p>
<p class="last"><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>v[</strong>&lt;N&gt;<strong>]</strong></td>
<td><p class="first">A single 32-bit <em>vector</em> register.</p>
<p class="last"><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><strong>v[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>vector</em> registers.</p>
<p class="last"><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>[v</strong>&lt;N&gt;, <strong>v</strong>&lt;N+1&gt;, … <strong>v</strong>&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>vector</em> registers.</p>
<p class="last">Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><em>N</em> &lt;= <em>K</em>.</li>
<li>0 &lt;= <em>N</em> &lt;= 255.</li>
<li>0 &lt;= <em>K</em> &lt;= 255.</li>
<li><em>K-N+1</em> must be equal to 1, 2, 3, 4, 8 or 16.</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v255</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">v252</span><span class="p">]</span>
<span class="p">[</span><span class="n">v252</span><span class="p">,</span><span class="n">v253</span><span class="p">,</span><span class="n">v254</span><span class="p">,</span><span class="n">v255</span><span class="p">]</span>
</pre></div>
</div>
<p id="amdgpu-synid-nsa">GFX10 <em>Image</em> instructions may use special <em>NSA</em> (Non-Sequential Address) syntax for <em>image addresses</em>:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[Vm</strong>, <strong>Vn</strong>, … <strong>Vk</strong><strong>]</strong></td>
<td><p class="first">A sequence of 32-bit <em>vector</em> registers.
Each register may be specified using a syntax
defined <a class="reference internal" href="#amdgpu-synid-v"><span class="std std-ref">above</span></a>.</p>
<p class="last">In contrast with standard syntax, registers
in <em>NSA</em> sequence are not required to have
consecutive indices. Moreover, the same register
may appear in the list more than once.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">v32</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
<span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">],[</span><span class="n">v2</span><span class="p">]]</span>
<span class="p">[</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="a">
<span id="amdgpu-synid-a"></span><h3><a class="toc-backref" href="#id4">a</a><a class="headerlink" href="#a" title="Permalink to this headline">¶</a></h3>
<p>Accumulator registers. There are 256 32-bit accumulator registers.</p>
<p>A sequence of <em>accumulator</em> registers may be used to operate with more than 32 bits of data.</p>
<p>Assembler currently supports sequences of 1, 2, 4 and 16 <em>accumulator</em> registers.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="32%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">An Alternative Syntax (SP3)</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>a</strong>&lt;N&gt;</td>
<td><strong>acc</strong>&lt;N&gt;</td>
<td><p class="first">A single 32-bit <em>accumulator</em> register.</p>
<p class="last"><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>a[</strong>&lt;N&gt;<strong>]</strong></td>
<td><strong>acc[</strong>&lt;N&gt;<strong>]</strong></td>
<td><p class="first">A single 32-bit <em>accumulator</em> register.</p>
<p class="last"><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><strong>a[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></td>
<td><strong>acc[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>accumulator</em> registers.</p>
<p class="last"><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>[a</strong>&lt;N&gt;, <strong>a</strong>&lt;N+1&gt;, … <strong>a</strong>&lt;K&gt;<strong>]</strong></td>
<td><strong>[acc</strong>&lt;N&gt;, <strong>acc</strong>&lt;N+1&gt;, … <strong>acc</strong>&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>accumulator</em> registers.</p>
<p class="last">Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><em>N</em> &lt;= <em>K</em>.</li>
<li>0 &lt;= <em>N</em> &lt;= 255.</li>
<li>0 &lt;= <em>K</em> &lt;= 255.</li>
<li><em>K-N+1</em> must be equal to 1, 2, 4 or 16.</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a255</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">a252</span><span class="p">]</span>
<span class="p">[</span><span class="n">a252</span><span class="p">,</span><span class="n">a253</span><span class="p">,</span><span class="n">a254</span><span class="p">,</span><span class="n">a255</span><span class="p">]</span>

<span class="n">acc0</span>
<span class="n">acc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">acc250</span><span class="p">]</span>
<span class="p">[</span><span class="n">acc2</span><span class="p">,</span><span class="n">acc3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="s">
<span id="amdgpu-synid-s"></span><h3><a class="toc-backref" href="#id5">s</a><a class="headerlink" href="#s" title="Permalink to this headline">¶</a></h3>
<p>Scalar 32-bit registers. The number of available <em>scalar</em> registers depends on GPU:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GPU</th>
<th class="head">Number of <em>scalar</em> registers</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GFX7</td>
<td>104</td>
</tr>
<tr class="row-odd"><td>GFX8</td>
<td>102</td>
</tr>
<tr class="row-even"><td>GFX9</td>
<td>102</td>
</tr>
<tr class="row-odd"><td>GFX10</td>
<td>106</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A sequence of <em>scalar</em> registers may be used to operate with more than 32 bits of data.
Assembler currently supports sequences of 1, 2, 4, 8 and 16 <em>scalar</em> registers.</p>
<p>Pairs of <em>scalar</em> registers must be even-aligned (the first register must be even).
Sequences of 4 and more <em>scalar</em> registers must be quad-aligned.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>s</strong>&lt;N&gt;</td>
<td><p class="first">A single 32-bit <em>scalar</em> register.</p>
<p class="last"><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>s[</strong>&lt;N&gt;<strong>]</strong></td>
<td><p class="first">A single 32-bit <em>scalar</em> register.</p>
<p class="last"><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><strong>s[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>scalar</em> registers.</p>
<p class="last"><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>[s</strong>&lt;N&gt;, <strong>s</strong>&lt;N+1&gt;, … <strong>s</strong>&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>scalar</em> registers.</p>
<p class="last">Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><em>N</em> must be properly aligned based on sequence size.</li>
<li><em>N</em> &lt;= <em>K</em>.</li>
<li>0 &lt;= <em>N</em> &lt; <em>SMAX</em>, where <em>SMAX</em> is the number of available <em>scalar</em> registers.</li>
<li>0 &lt;= <em>K</em> &lt; <em>SMAX</em>, where <em>SMAX</em> is the number of available <em>scalar</em> registers.</li>
<li><em>K-N+1</em> must be equal to 1, 2, 4, 8 or 16.</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s0</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">s4</span><span class="p">]</span>
<span class="p">[</span><span class="n">s4</span><span class="p">,</span><span class="n">s5</span><span class="p">,</span><span class="n">s6</span><span class="p">,</span><span class="n">s7</span><span class="p">]</span>
</pre></div>
</div>
<p>Examples of <em>scalar</em> registers with an invalid alignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="trap">
<span id="amdgpu-synid-trap"></span><h3><a class="toc-backref" href="#id6">trap</a><a class="headerlink" href="#trap" title="Permalink to this headline">¶</a></h3>
<p>A set of trap handler registers:</p>
<ul class="simple">
<li><a class="reference internal" href="#amdgpu-synid-ttmp"><span class="std std-ref">ttmp</span></a></li>
<li><a class="reference internal" href="#amdgpu-synid-tba"><span class="std std-ref">tba</span></a></li>
<li><a class="reference internal" href="#amdgpu-synid-tma"><span class="std std-ref">tma</span></a></li>
</ul>
</div>
<div class="section" id="ttmp">
<span id="amdgpu-synid-ttmp"></span><h3><a class="toc-backref" href="#id7">ttmp</a><a class="headerlink" href="#ttmp" title="Permalink to this headline">¶</a></h3>
<p>Trap handler temporary scalar registers, 32-bits wide.
The number of available <em>ttmp</em> registers depends on GPU:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GPU</th>
<th class="head">Number of <em>ttmp</em> registers</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>GFX7</td>
<td>12</td>
</tr>
<tr class="row-odd"><td>GFX8</td>
<td>12</td>
</tr>
<tr class="row-even"><td>GFX9</td>
<td>16</td>
</tr>
<tr class="row-odd"><td>GFX10</td>
<td>16</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A sequence of <em>ttmp</em> registers may be used to operate with more than 32 bits of data.
Assembler currently supports sequences of 1, 2, 4, 8 and 16 <em>ttmp</em> registers.</p>
<p>Pairs of <em>ttmp</em> registers must be even-aligned (the first register must be even).
Sequences of 4 and more <em>ttmp</em> registers must be quad-aligned.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>ttmp</strong>&lt;N&gt;</td>
<td><p class="first">A single 32-bit <em>ttmp</em> register.</p>
<p class="last"><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>ttmp[</strong>&lt;N&gt;<strong>]</strong></td>
<td><p class="first">A single 32-bit <em>ttmp</em> register.</p>
<p class="last"><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><strong>ttmp[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>ttmp</em> registers.</p>
<p class="last"><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><strong>[ttmp</strong>&lt;N&gt;, <strong>ttmp</strong>&lt;N+1&gt;, … <strong>ttmp</strong>&lt;K&gt;<strong>]</strong></td>
<td><p class="first">A sequence of (<em>K-N+1</em>) <em>ttmp</em> registers.</p>
<p class="last">Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><em>N</em> must be properly aligned based on sequence size.</li>
<li><em>N</em> &lt;= <em>K</em>.</li>
<li>0 &lt;= <em>N</em> &lt; <em>TMAX</em>, where <em>TMAX</em> is the number of available <em>ttmp</em> registers.</li>
<li>0 &lt;= <em>K</em> &lt; <em>TMAX</em>, where <em>TMAX</em> is the number of available <em>ttmp</em> registers.</li>
<li><em>K-N+1</em> must be equal to 1, 2, 4, 8 or 16.</li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ttmp0</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">ttmp4</span><span class="p">]</span>
<span class="p">[</span><span class="n">ttmp4</span><span class="p">,</span><span class="n">ttmp5</span><span class="p">,</span><span class="n">ttmp6</span><span class="p">,</span><span class="n">ttmp7</span><span class="p">]</span>
</pre></div>
</div>
<p>Examples of <em>ttmp</em> registers with an invalid alignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="tba">
<span id="amdgpu-synid-tba"></span><h3><a class="toc-backref" href="#id8">tba</a><a class="headerlink" href="#tba" title="Permalink to this headline">¶</a></h3>
<p>Trap base address, 64-bits wide. Holds the pointer to the current trap handler program.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="70%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tba</td>
<td>64-bit <em>trap base address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>[tba]</td>
<td>64-bit <em>trap base address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-even"><td>[tba_lo,tba_hi]</td>
<td>64-bit <em>trap base address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>trap base address</em> may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="70%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tba_lo</td>
<td>Low 32 bits of <em>trap base address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>tba_hi</td>
<td>High 32 bits of <em>trap base address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-even"><td>[tba_lo]</td>
<td>Low 32 bits of <em>trap base address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>[tba_hi]</td>
<td>High 32 bits of <em>trap base address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that <em>tba</em>, <em>tba_lo</em> and <em>tba_hi</em> are not accessible as assembler registers in GFX9 and GFX10,
but <em>tba</em> is readable/writable with the help of <em>s_get_reg</em> and <em>s_set_reg</em> instructions.</p>
</div>
<div class="section" id="tma">
<span id="amdgpu-synid-tma"></span><h3><a class="toc-backref" href="#id9">tma</a><a class="headerlink" href="#tma" title="Permalink to this headline">¶</a></h3>
<p>Trap memory address, 64-bits wide.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="67%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tma</td>
<td>64-bit <em>trap memory address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>[tma]</td>
<td>64-bit <em>trap memory address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-even"><td>[tma_lo,tma_hi]</td>
<td>64-bit <em>trap memory address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>trap memory address</em> may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="67%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>tma_lo</td>
<td>Low 32 bits of <em>trap memory address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>tma_hi</td>
<td>High 32 bits of <em>trap memory address</em> register.</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-even"><td>[tma_lo]</td>
<td>Low 32 bits of <em>trap memory address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
<tr class="row-odd"><td>[tma_hi]</td>
<td>High 32 bits of <em>trap memory address</em> register (an SP3 syntax).</td>
<td>GFX7, GFX8</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note that <em>tma</em>, <em>tma_lo</em> and <em>tma_hi</em> are not accessible as assembler registers in GFX9 and GFX10,
but <em>tma</em> is readable/writable with the help of <em>s_get_reg</em> and <em>s_set_reg</em> instructions.</p>
</div>
<div class="section" id="flat-scratch">
<span id="amdgpu-synid-flat-scratch"></span><h3><a class="toc-backref" href="#id10">flat_scratch</a><a class="headerlink" href="#flat-scratch" title="Permalink to this headline">¶</a></h3>
<p>Flat scratch address, 64-bits wide. Holds the base address of scratch memory.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>flat_scratch</td>
<td>64-bit <em>flat scratch</em> address register.</td>
</tr>
<tr class="row-odd"><td>[flat_scratch]</td>
<td>64-bit <em>flat scratch</em> address register (an SP3 syntax).</td>
</tr>
<tr class="row-even"><td>[flat_scratch_lo,flat_scratch_hi]</td>
<td>64-bit <em>flat scratch</em> address register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>flat scratch</em> address may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>flat_scratch_lo</td>
<td>Low 32 bits of <em>flat scratch</em> address register.</td>
</tr>
<tr class="row-odd"><td>flat_scratch_hi</td>
<td>High 32 bits of <em>flat scratch</em> address register.</td>
</tr>
<tr class="row-even"><td>[flat_scratch_lo]</td>
<td>Low 32 bits of <em>flat scratch</em> address register (an SP3 syntax).</td>
</tr>
<tr class="row-odd"><td>[flat_scratch_hi]</td>
<td>High 32 bits of <em>flat scratch</em> address register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="xnack">
<span id="amdgpu-synid-xnack"></span><h3><a class="toc-backref" href="#id11">xnack</a><a class="headerlink" href="#xnack" title="Permalink to this headline">¶</a></h3>
<p>Xnack mask, 64-bits wide. Holds a 64-bit mask of which threads
received an <em>XNACK</em> due to a vector memory operation.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">GFX7 does not support <em>xnack</em> feature. For availability of this feature in other GPUs, refer <a class="reference internal" href="AMDGPUUsage.html#amdgpu-processors"><span class="std std-ref">this table</span></a>.</p>
</div>
<p></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>xnack_mask</td>
<td>64-bit <em>xnack mask</em> register.</td>
</tr>
<tr class="row-odd"><td>[xnack_mask]</td>
<td>64-bit <em>xnack mask</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-even"><td>[xnack_mask_lo,xnack_mask_hi]</td>
<td>64-bit <em>xnack mask</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>xnack mask</em> may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>xnack_mask_lo</td>
<td>Low 32 bits of <em>xnack mask</em> register.</td>
</tr>
<tr class="row-odd"><td>xnack_mask_hi</td>
<td>High 32 bits of <em>xnack mask</em> register.</td>
</tr>
<tr class="row-even"><td>[xnack_mask_lo]</td>
<td>Low 32 bits of <em>xnack mask</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-odd"><td>[xnack_mask_hi]</td>
<td>High 32 bits of <em>xnack mask</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="vcc">
<span id="amdgpu-synid-vcc-lo"></span><span id="amdgpu-synid-vcc"></span><h3><a class="toc-backref" href="#id12">vcc</a><a class="headerlink" href="#vcc" title="Permalink to this headline">¶</a></h3>
<p>Vector condition code, 64-bits wide. A bit mask with one bit per thread;
it holds the result of a vector compare operation.</p>
<p>Note that GFX10 H/W does not use high 32 bits of <em>vcc</em> in <em>wave32</em> mode.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vcc</td>
<td>64-bit <em>vector condition code</em> register.</td>
</tr>
<tr class="row-odd"><td>[vcc]</td>
<td>64-bit <em>vector condition code</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-even"><td>[vcc_lo,vcc_hi]</td>
<td>64-bit <em>vector condition code</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>vector condition code</em> may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>vcc_lo</td>
<td>Low 32 bits of <em>vector condition code</em> register.</td>
</tr>
<tr class="row-odd"><td>vcc_hi</td>
<td>High 32 bits of <em>vector condition code</em> register.</td>
</tr>
<tr class="row-even"><td>[vcc_lo]</td>
<td>Low 32 bits of <em>vector condition code</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-odd"><td>[vcc_hi]</td>
<td>High 32 bits of <em>vector condition code</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="m0">
<span id="amdgpu-synid-m0"></span><h3><a class="toc-backref" href="#id13">m0</a><a class="headerlink" href="#m0" title="Permalink to this headline">¶</a></h3>
<p>A 32-bit memory register. It has various uses,
including register indexing and bounds checking.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>m0</td>
<td>A 32-bit <em>memory</em> register.</td>
</tr>
<tr class="row-odd"><td>[m0]</td>
<td>A 32-bit <em>memory</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="exec">
<span id="amdgpu-synid-exec"></span><h3><a class="toc-backref" href="#id14">exec</a><a class="headerlink" href="#exec" title="Permalink to this headline">¶</a></h3>
<p>Execute mask, 64-bits wide. A bit mask with one bit per thread,
which is applied to vector instructions and controls which threads execute
and which ignore the instruction.</p>
<p>Note that GFX10 H/W does not use high 32 bits of <em>exec</em> in <em>wave32</em> mode.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>exec</td>
<td>64-bit <em>execute mask</em> register.</td>
</tr>
<tr class="row-odd"><td>[exec]</td>
<td>64-bit <em>execute mask</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-even"><td>[exec_lo,exec_hi]</td>
<td>64-bit <em>execute mask</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>execute mask</em> may be accessed as separate registers:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>exec_lo</td>
<td>Low 32 bits of <em>execute mask</em> register.</td>
</tr>
<tr class="row-odd"><td>exec_hi</td>
<td>High 32 bits of <em>execute mask</em> register.</td>
</tr>
<tr class="row-even"><td>[exec_lo]</td>
<td>Low 32 bits of <em>execute mask</em> register (an SP3 syntax).</td>
</tr>
<tr class="row-odd"><td>[exec_hi]</td>
<td>High 32 bits of <em>execute mask</em> register (an SP3 syntax).</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="vccz">
<span id="amdgpu-synid-vccz"></span><h3><a class="toc-backref" href="#id15">vccz</a><a class="headerlink" href="#vccz" title="Permalink to this headline">¶</a></h3>
<p>A single bit flag indicating that the <a class="reference internal" href="#amdgpu-synid-vcc"><span class="std std-ref">vcc</span></a> is all zeros.</p>
<p>Note: when GFX10 operates in <em>wave32</em> mode, this register reflects state of <a class="reference internal" href="#amdgpu-synid-vcc-lo"><span class="std std-ref">vcc_lo</span></a>.</p>
</div>
<div class="section" id="execz">
<span id="amdgpu-synid-execz"></span><h3><a class="toc-backref" href="#id16">execz</a><a class="headerlink" href="#execz" title="Permalink to this headline">¶</a></h3>
<p>A single bit flag indicating that the <a class="reference internal" href="#amdgpu-synid-exec"><span class="std std-ref">exec</span></a> is all zeros.</p>
<p>Note: when GFX10 operates in <em>wave32</em> mode, this register reflects state of <a class="reference internal" href="#amdgpu-synid-exec"><span class="std std-ref">exec_lo</span></a>.</p>
</div>
<div class="section" id="scc">
<span id="amdgpu-synid-scc"></span><h3><a class="toc-backref" href="#id17">scc</a><a class="headerlink" href="#scc" title="Permalink to this headline">¶</a></h3>
<p>A single bit flag indicating the result of a scalar compare operation.</p>
</div>
<div class="section" id="lds-direct">
<span id="amdgpu-synid-lds-direct"></span><h3><a class="toc-backref" href="#id18">lds_direct</a><a class="headerlink" href="#lds-direct" title="Permalink to this headline">¶</a></h3>
<p>A special operand which supplies a 32-bit value
fetched from <em>LDS</em> memory using <a class="reference internal" href="#amdgpu-synid-m0"><span class="std std-ref">m0</span></a> as an address.</p>
</div>
<div class="section" id="null">
<span id="amdgpu-synid-null"></span><h3><a class="toc-backref" href="#id19">null</a><a class="headerlink" href="#null" title="Permalink to this headline">¶</a></h3>
<p>This is a special operand which may be used as a source or a destination.</p>
<p>When used as a destination, the result of the operation is discarded.</p>
<p>When used as a source, it supplies zero value.</p>
<p>GFX10 only.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Due to a H/W bug, this operand cannot be used with VALU instructions in first generation of GFX10.</p>
</div>
</div>
<div class="section" id="inline-constant">
<span id="amdgpu-synid-constant"></span><h3><a class="toc-backref" href="#id20">inline constant</a><a class="headerlink" href="#inline-constant" title="Permalink to this headline">¶</a></h3>
<p>An <em>inline constant</em> is an integer or a floating-point value encoded as a part of an instruction.
Compare <em>inline constants</em> with <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<p>Inline constants include:</p>
<ul class="simple">
<li><a class="reference internal" href="#amdgpu-synid-iconst"><span class="std std-ref">iconst</span></a></li>
<li><a class="reference internal" href="#amdgpu-synid-fconst"><span class="std std-ref">fconst</span></a></li>
<li><a class="reference internal" href="#amdgpu-synid-ival"><span class="std std-ref">ival</span></a></li>
</ul>
<p>If a number may be encoded as either
a <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literal</span></a> or
a <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">constant</span></a>,
assembler selects the latter encoding as more efficient.</p>
<div class="section" id="iconst">
<span id="amdgpu-synid-iconst"></span><h4><a class="toc-backref" href="#id21">iconst</a><a class="headerlink" href="#iconst" title="Permalink to this headline">¶</a></h4>
<p>An <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a> or
an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>
encoded as an <em>inline constant</em>.</p>
<p>Only a small fraction of integer numbers may be encoded as <em>inline constants</em>.
They are enumerated in the table below.
Other integer numbers have to be encoded as <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Note</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>{0..64}</td>
<td>Positive integer inline constants.</td>
</tr>
<tr class="row-odd"><td>{-16..-1}</td>
<td>Negative integer inline constants.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">GFX7 does not support inline constants for <em>f16</em> operands.</p>
</div>
</div>
<div class="section" id="fconst">
<span id="amdgpu-synid-fconst"></span><h4><a class="toc-backref" href="#id22">fconst</a><a class="headerlink" href="#fconst" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point number</span></a>
encoded as an <em>inline constant</em>.</p>
<p>Only a small fraction of floating-point numbers may be encoded as <em>inline constants</em>.
They are enumerated in the table below.
Other floating-point numbers have to be encoded as <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="58%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Note</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0.0</td>
<td>The same as integer constant 0.</td>
<td>All GPUs</td>
</tr>
<tr class="row-odd"><td>0.5</td>
<td>Floating-point constant 0.5</td>
<td>All GPUs</td>
</tr>
<tr class="row-even"><td>1.0</td>
<td>Floating-point constant 1.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-odd"><td>2.0</td>
<td>Floating-point constant 2.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-even"><td>4.0</td>
<td>Floating-point constant 4.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-odd"><td>-0.5</td>
<td>Floating-point constant -0.5</td>
<td>All GPUs</td>
</tr>
<tr class="row-even"><td>-1.0</td>
<td>Floating-point constant -1.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-odd"><td>-2.0</td>
<td>Floating-point constant -2.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-even"><td>-4.0</td>
<td>Floating-point constant -4.0</td>
<td>All GPUs</td>
</tr>
<tr class="row-odd"><td>0.1592</td>
<td>1.0/(2.0*pi). Use only for 16-bit operands.</td>
<td>GFX8, GFX9, GFX10</td>
</tr>
<tr class="row-even"><td>0.15915494</td>
<td>1.0/(2.0*pi). Use only for 16- and 32-bit operands.</td>
<td>GFX8, GFX9, GFX10</td>
</tr>
<tr class="row-odd"><td>0.15915494309189532</td>
<td>1.0/(2.0*pi).</td>
<td>GFX8, GFX9, GFX10</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">GFX7 does not support inline constants for <em>f16</em> operands.</p>
</div>
</div>
<div class="section" id="ival">
<span id="amdgpu-synid-ival"></span><h4><a class="toc-backref" href="#id23">ival</a><a class="headerlink" href="#ival" title="Permalink to this headline">¶</a></h4>
<p>A symbolic operand encoded as an <em>inline constant</em>.
These operands provide read-only access to H/W registers.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="56%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Note</th>
<th class="head">Availability</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>shared_base</td>
<td>Base address of shared memory region.</td>
<td>GFX9, GFX10</td>
</tr>
<tr class="row-odd"><td>shared_limit</td>
<td>Address of the end of shared memory region.</td>
<td>GFX9, GFX10</td>
</tr>
<tr class="row-even"><td>private_base</td>
<td>Base address of private memory region.</td>
<td>GFX9, GFX10</td>
</tr>
<tr class="row-odd"><td>private_limit</td>
<td>Address of the end of private memory region.</td>
<td>GFX9, GFX10</td>
</tr>
<tr class="row-even"><td>pops_exiting_wave_id</td>
<td>A dedicated counter for POPS.</td>
<td>GFX9, GFX10</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="literal">
<span id="amdgpu-synid-literal"></span><h3><a class="toc-backref" href="#id24">literal</a><a class="headerlink" href="#literal" title="Permalink to this headline">¶</a></h3>
<p>A <em>literal</em> is a 64-bit value encoded as a separate 32-bit dword in the instruction stream.
Compare <em>literals</em> with <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">inline constants</span></a>.</p>
<p>If a number may be encoded as either
a <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literal</span></a> or
an <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">inline constant</span></a>,
assembler selects the latter encoding as more efficient.</p>
<p>Literals may be specified as <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>,
<a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point numbers</span></a>,
<a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a> or
<a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">relocatable expressions</span></a>.</p>
<p>An instruction may use only one literal but several operands may refer the same literal.</p>
</div>
<div class="section" id="uimm8">
<span id="amdgpu-synid-uimm8"></span><h3><a class="toc-backref" href="#id25">uimm8</a><a class="headerlink" href="#uimm8" title="Permalink to this headline">¶</a></h3>
<p>A 8-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.
The value must be in the range 0..0xFF.</p>
</div>
<div class="section" id="uimm32">
<span id="amdgpu-synid-uimm32"></span><h3><a class="toc-backref" href="#id26">uimm32</a><a class="headerlink" href="#uimm32" title="Permalink to this headline">¶</a></h3>
<p>A 32-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.
The value must be in the range 0..0xFFFFFFFF.</p>
</div>
<div class="section" id="uimm20">
<span id="amdgpu-synid-uimm20"></span><h3><a class="toc-backref" href="#id27">uimm20</a><a class="headerlink" href="#uimm20" title="Permalink to this headline">¶</a></h3>
<p>A 20-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
<p>The value must be in the range 0..0xFFFFF.</p>
</div>
<div class="section" id="uimm21">
<span id="amdgpu-synid-uimm21"></span><h3><a class="toc-backref" href="#id28">uimm21</a><a class="headerlink" href="#uimm21" title="Permalink to this headline">¶</a></h3>
<p>A 21-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
<p>The value must be in the range 0..0x1FFFFF.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Assembler currently supports 20-bit offsets only. Use <a class="reference internal" href="#amdgpu-synid-uimm20"><span class="std std-ref">uimm20</span></a> as a replacement.</p>
</div>
</div>
<div class="section" id="simm21">
<span id="amdgpu-synid-simm21"></span><h3><a class="toc-backref" href="#id29">simm21</a><a class="headerlink" href="#simm21" title="Permalink to this headline">¶</a></h3>
<p>A 21-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
<p>The value must be in the range -0x100000..0x0FFFFF.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Assembler currently supports 20-bit unsigned offsets only. Use <a class="reference internal" href="#amdgpu-synid-uimm20"><span class="std std-ref">uimm20</span></a> as a replacement.</p>
</div>
</div>
<div class="section" id="off">
<span id="amdgpu-synid-off"></span><h3><a class="toc-backref" href="#id30">off</a><a class="headerlink" href="#off" title="Permalink to this headline">¶</a></h3>
<p>A special entity which indicates that the value of this operand is not used.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>off</td>
<td>Indicates an unused operand.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="numbers">
<span id="amdgpu-synid-number"></span><h2><a class="toc-backref" href="#id31">Numbers</a><a class="headerlink" href="#numbers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="integer-numbers">
<span id="amdgpu-synid-integer-number"></span><h3><a class="toc-backref" href="#id32">Integer Numbers</a><a class="headerlink" href="#integer-numbers" title="Permalink to this headline">¶</a></h3>
<p>Integer numbers are 64 bits wide.
They are converted to <a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-int-conv"><span class="std std-ref">here</span></a>.</p>
<p>Integer numbers may be specified in binary, octal, hexadecimal and decimal formats:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="61%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">Syntax</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Decimal</td>
<td>[-]?[1-9][0-9]*</td>
<td>-1234</td>
</tr>
<tr class="row-odd"><td>Binary</td>
<td>[-]?0b[01]+</td>
<td>0b1010</td>
</tr>
<tr class="row-even"><td>Octal</td>
<td>[-]?0[0-7]+</td>
<td>010</td>
</tr>
<tr class="row-odd"><td>Hexadecimal</td>
<td>[-]?0x[0-9a-fA-F]+</td>
<td>0xff</td>
</tr>
<tr class="row-even"><td></td>
<td>[-]?[0x]?[0-9][0-9a-fA-F]*[hH]</td>
<td>0ffh</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="floating-point-numbers">
<span id="amdgpu-synid-floating-point-number"></span><h3><a class="toc-backref" href="#id33">Floating-Point Numbers</a><a class="headerlink" href="#floating-point-numbers" title="Permalink to this headline">¶</a></h3>
<p>All floating-point numbers are handled as double (64 bits wide).
They are converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-fp-conv"><span class="std std-ref">here</span></a>.</p>
<p>Floating-point numbers may be specified in hexadecimal and decimal formats:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="51%" />
<col width="20%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">Syntax</th>
<th class="head">Examples</th>
<th class="head">Note</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Decimal</td>
<td>[-]?[0-9]*[.][0-9]*([eE][+-]?[0-9]*)?</td>
<td>-1.234, 234e2</td>
<td>Must include either
a decimal separator
or an exponent.</td>
</tr>
<tr class="row-odd"><td>Hexadecimal</td>
<td>[-]0x[0-9a-fA-F]*(.[0-9a-fA-F]*)?[pP][+-]?[0-9a-fA-F]+</td>
<td>-0x1afp-10, 0x.1afp10</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="expressions">
<span id="amdgpu-synid-expression"></span><h2><a class="toc-backref" href="#id34">Expressions</a><a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h2>
<p>An expression is evaluated to a 64-bit integer.
Note that floating-point expressions are not supported.</p>
<p>There are two kinds of expressions:</p>
<ul class="simple">
<li><a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">Absolute</span></a>.</li>
<li><a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">Relocatable</span></a>.</li>
</ul>
<div class="section" id="absolute-expressions">
<span id="amdgpu-synid-absolute-expression"></span><h3><a class="toc-backref" href="#id35">Absolute Expressions</a><a class="headerlink" href="#absolute-expressions" title="Permalink to this headline">¶</a></h3>
<p>The value of an absolute expression does not change after program relocation.
Absolute expressions must not include unassigned and relocatable values
such as labels.</p>
<p>Absolute expressions are evaluated to 64-bit integer values and converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-int-conv"><span class="std std-ref">here</span></a>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="section" id="relocatable-expressions">
<span id="amdgpu-synid-relocatable-expression"></span><h3><a class="toc-backref" href="#id36">Relocatable Expressions</a><a class="headerlink" href="#relocatable-expressions" title="Permalink to this headline">¶</a></h3>
<p>The value of a relocatable expression depends on program relocation.</p>
<p>Note that use of relocatable expressions is limited with branch targets
and 32-bit integer operands.</p>
<p>A relocatable expression is evaluated to a 64-bit integer value
which depends on operand kind and <a class="reference internal" href="AMDGPUUsage.html#amdgpu-relocation-records"><span class="std std-ref">relocation type</span></a>
of symbol(s) used in the expression. For example, if an instruction refers a label,
this reference is evaluated to an offset from the address after the instruction
to the label address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">label</span><span class="p">:</span>
<span class="n">v_add_co_u32_e32</span> <span class="n">v0</span><span class="p">,</span> <span class="n">vcc</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">v1</span>  <span class="o">//</span> <span class="s1">&#39;label&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">4</span>
</pre></div>
</div>
<p>Note that values of relocatable expressions are usually unknown at assembly time;
they are resolved later by a linker and converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-rl-conv"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="section" id="operands-and-operations">
<h3><a class="toc-backref" href="#id37">Operands and Operations</a><a class="headerlink" href="#operands-and-operations" title="Permalink to this headline">¶</a></h3>
<p>Expressions are composed of 64-bit integer operands and operations.
Operands include <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
and <a class="reference internal" href="#amdgpu-synid-symbol"><span class="std std-ref">symbols</span></a>.</p>
<p>Expressions may also use “.” which is a reference to the current PC (program counter).</p>
<p><a class="reference internal" href="#amdgpu-synid-expression-un-op"><span class="std std-ref">Unary</span></a> and <a class="reference internal" href="#amdgpu-synid-expression-bin-op"><span class="std std-ref">binary</span></a>
operations produce 64-bit integer results.</p>
</div>
<div class="section" id="syntax-of-expressions">
<h3><a class="toc-backref" href="#id38">Syntax of Expressions</a><a class="headerlink" href="#syntax-of-expressions" title="Permalink to this headline">¶</a></h3>
<p>The syntax of expressions is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expr</span> <span class="p">::</span><span class="o">=</span> <span class="n">expr</span> <span class="n">binop</span> <span class="n">expr</span> <span class="o">|</span> <span class="n">primaryexpr</span> <span class="p">;</span>

<span class="n">primaryexpr</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="n">expr</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="n">symbol</span> <span class="o">|</span> <span class="n">number</span> <span class="o">|</span> <span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="n">unop</span> <span class="n">primaryexpr</span> <span class="p">;</span>

<span class="n">binop</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;&amp;&amp;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;||&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;|&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;^&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&amp;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;!&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;==&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;!=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&lt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;+&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;-&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;*&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;/&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;%&#39;</span> <span class="p">;</span>

<span class="n">unop</span> <span class="p">::</span><span class="o">=</span> <span class="s1">&#39;~&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;+&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;-&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;!&#39;</span> <span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="binary-operators">
<span id="amdgpu-synid-expression-bin-op"></span><h3><a class="toc-backref" href="#id39">Binary Operators</a><a class="headerlink" href="#binary-operators" title="Permalink to this headline">¶</a></h3>
<p>Binary operators are described in the following table.
They operate on and produce 64-bit integers.
Operators with higher priority are performed first.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="14%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Priority</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>*</td>
<td>5</td>
<td>Integer multiplication.</td>
</tr>
<tr class="row-odd"><td>/</td>
<td>5</td>
<td>Integer division.</td>
</tr>
<tr class="row-even"><td>%</td>
<td>5</td>
<td>Integer signed remainder.</td>
</tr>
<tr class="row-odd"><td>+</td>
<td>4</td>
<td>Integer addition.</td>
</tr>
<tr class="row-even"><td>-</td>
<td>4</td>
<td>Integer subtraction.</td>
</tr>
<tr class="row-odd"><td>&lt;&lt;</td>
<td>3</td>
<td>Integer shift left.</td>
</tr>
<tr class="row-even"><td>&gt;&gt;</td>
<td>3</td>
<td>Logical shift right.</td>
</tr>
<tr class="row-odd"><td>==</td>
<td>2</td>
<td>Equality comparison.</td>
</tr>
<tr class="row-even"><td>!=</td>
<td>2</td>
<td>Inequality comparison.</td>
</tr>
<tr class="row-odd"><td>&lt;&gt;</td>
<td>2</td>
<td>Inequality comparison.</td>
</tr>
<tr class="row-even"><td>&lt;</td>
<td>2</td>
<td>Signed less than comparison.</td>
</tr>
<tr class="row-odd"><td>&lt;=</td>
<td>2</td>
<td>Signed less than or equal comparison.</td>
</tr>
<tr class="row-even"><td>&gt;</td>
<td>2</td>
<td>Signed greater than comparison.</td>
</tr>
<tr class="row-odd"><td>&gt;=</td>
<td>2</td>
<td>Signed greater than or equal comparison.</td>
</tr>
<tr class="row-even"><td>|</td>
<td>1</td>
<td>Bitwise or.</td>
</tr>
<tr class="row-odd"><td>^</td>
<td>1</td>
<td>Bitwise xor.</td>
</tr>
<tr class="row-even"><td>&amp;</td>
<td>1</td>
<td>Bitwise and.</td>
</tr>
<tr class="row-odd"><td>&amp;&amp;</td>
<td>0</td>
<td>Logical and.</td>
</tr>
<tr class="row-even"><td>||</td>
<td>0</td>
<td>Logical or.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="unary-operators">
<span id="amdgpu-synid-expression-un-op"></span><h3><a class="toc-backref" href="#id40">Unary Operators</a><a class="headerlink" href="#unary-operators" title="Permalink to this headline">¶</a></h3>
<p>Unary operators are described in the following table.
They operate on and produce 64-bit integers.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>!</td>
<td>Logical negation.</td>
</tr>
<tr class="row-odd"><td>~</td>
<td>Bitwise negation.</td>
</tr>
<tr class="row-even"><td>+</td>
<td>Integer unary plus.</td>
</tr>
<tr class="row-odd"><td>-</td>
<td>Integer unary minus.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="symbols">
<span id="amdgpu-synid-symbol"></span><h3><a class="toc-backref" href="#id41">Symbols</a><a class="headerlink" href="#symbols" title="Permalink to this headline">¶</a></h3>
<p>A symbol is a named 64-bit integer value, representing a relocatable
address or an absolute (non-relocatable) number.</p>
<dl class="docutils">
<dt>Symbol names have the following syntax:</dt>
<dd><code class="docutils literal notranslate"><span class="pre">[a-zA-Z_.][a-zA-Z0-9_$.&#64;]*</span></code></dd>
</dl>
<p>The table below provides several examples of syntax used for symbol definition.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>.globl &lt;S&gt;</td>
<td>Declares a global symbol S without assigning it a value.</td>
</tr>
<tr class="row-odd"><td>.set &lt;S&gt;, &lt;E&gt;</td>
<td>Assigns the value of an expression E to a symbol S.</td>
</tr>
<tr class="row-even"><td>&lt;S&gt; = &lt;E&gt;</td>
<td>Assigns the value of an expression E to a symbol S.</td>
</tr>
<tr class="row-odd"><td>&lt;S&gt;:</td>
<td>Declares a label S and assigns it the current PC value.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A symbol may be used before it is declared or assigned;
unassigned symbols are assumed to be PC-relative.</p>
<p>Additional information about symbols may be found <a class="reference internal" href="AMDGPUUsage.html#amdgpu-symbols"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
<div class="section" id="type-and-size-conversion">
<span id="amdgpu-synid-conv"></span><h2><a class="toc-backref" href="#id42">Type and Size Conversion</a><a class="headerlink" href="#type-and-size-conversion" title="Permalink to this headline">¶</a></h2>
<p>This section describes what happens when a 64-bit
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>, a
<a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point number</span></a> or an
<a class="reference internal" href="#amdgpu-synid-expression"><span class="std std-ref">expression</span></a>
is used for an operand which has a different type or size.</p>
<div class="section" id="conversion-of-integer-values">
<span id="amdgpu-synid-int-conv"></span><h3><a class="toc-backref" href="#id43">Conversion of Integer Values</a><a class="headerlink" href="#conversion-of-integer-values" title="Permalink to this headline">¶</a></h3>
<p>Instruction operands may be specified as 64-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a> or
<a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>. These values are converted to
the <a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a> using the following steps:</p>
<p>1. <em>Validation</em>. Assembler checks if the input value may be truncated without loss to the required <em>truncation width</em>
(see the table below). There are two cases when this operation is enabled:</p>
<blockquote>
<div><ul class="simple">
<li>The truncated bits are all 0.</li>
<li>The truncated bits are all 1 and the value after truncation has its MSB bit set.</li>
</ul>
</div></blockquote>
<p>In all other cases assembler triggers an error.</p>
<p>2. <em>Conversion</em>. The input value is converted to the expected type as described in the table below.
Depending on operand kind, this conversion is performed by either assembler or AMDGPU H/W (or both).</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="15%" />
<col width="13%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Expected type</th>
<th class="head">Truncation Width</th>
<th class="head">Conversion</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>i16, u16, b16</td>
<td>16</td>
<td>num.u16</td>
<td>Truncate to 16 bits.</td>
</tr>
<tr class="row-odd"><td>i32, u32, b32</td>
<td>32</td>
<td>num.u32</td>
<td>Truncate to 32 bits.</td>
</tr>
<tr class="row-even"><td>i64</td>
<td>32</td>
<td>{-1,num.i32}</td>
<td>Truncate to 32 bits and then sign-extend the result to 64 bits.</td>
</tr>
<tr class="row-odd"><td>u64, b64</td>
<td>32</td>
<td>{0,num.u32}</td>
<td>Truncate to 32 bits and then zero-extend the result to 64 bits.</td>
</tr>
<tr class="row-even"><td>f16</td>
<td>16</td>
<td>num.u16</td>
<td>Use low 16 bits as an f16 value.</td>
</tr>
<tr class="row-odd"><td>f32</td>
<td>32</td>
<td>num.u32</td>
<td>Use low 32 bits as an f32 value.</td>
</tr>
<tr class="row-even"><td>f64</td>
<td>32</td>
<td>{num.u32,0}</td>
<td>Use low 32 bits of the number as high 32 bits
of the result; low 32 bits of the result are zeroed.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples of enabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFF</span>
<span class="n">v_add_f16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFF</span> <span class="p">(</span><span class="n">NaN</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">v_add_u32</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFFFFFF</span>
<span class="n">v_add_f32</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFFFFFF</span> <span class="p">(</span><span class="n">NaN</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xff00</span><span class="p">,</span> <span class="n">v0</span>              <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xffffffffffffff00</span><span class="p">,</span> <span class="n">v0</span>  <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">256</span><span class="p">,</span> <span class="n">v0</span>                <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
                                      <span class="o">//</span>
<span class="n">s_bfe_i64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span><span class="p">,</span> <span class="n">s3</span>      <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffffffffffefffff</span>
<span class="n">s_bfe_u64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span><span class="p">,</span> <span class="n">s3</span>      <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x00000000ffefffff</span>
<span class="n">v_ceil_f64_e32</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span>     <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffefffff00000000</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.7976922776554302e308</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">x</span> <span class="o">=</span> <span class="mh">0xffefffff</span>                        <span class="o">//</span>
<span class="n">s_bfe_i64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">s3</span>               <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffffffffffefffff</span>
<span class="n">s_bfe_u64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">s3</span>               <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x00000000ffefffff</span>
<span class="n">v_ceil_f64_e32</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span>              <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffefffff00000000</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.7976922776554302e308</span><span class="p">)</span>
</pre></div>
</div>
<p>Examples of disabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0x1ff00</span><span class="p">,</span> <span class="n">v0</span>               <span class="o">//</span> <span class="n">truncated</span> <span class="n">bits</span> <span class="n">are</span> <span class="ow">not</span> <span class="nb">all</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">1</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xffffffffffff00ff</span><span class="p">,</span> <span class="n">v0</span>    <span class="o">//</span> <span class="n">truncated</span> <span class="n">bits</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">match</span> <span class="n">MSB</span> <span class="n">of</span> <span class="n">the</span> <span class="n">result</span>
</pre></div>
</div>
</div>
<div class="section" id="conversion-of-floating-point-values">
<span id="amdgpu-synid-fp-conv"></span><h3><a class="toc-backref" href="#id44">Conversion of Floating-Point Values</a><a class="headerlink" href="#conversion-of-floating-point-values" title="Permalink to this headline">¶</a></h3>
<p>Instruction operands may be specified as 64-bit <a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point numbers</span></a>.
These values are converted to the <a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a> using the following steps:</p>
<p>1. <em>Validation</em>. Assembler checks if the input f64 number can be converted
to the <em>required floating-point type</em> (see the table below) without overflow or underflow.
Precision lost is allowed. If this conversion is not possible, assembler triggers an error.</p>
<p>2. <em>Conversion</em>. The input value is converted to the expected type as described in the table below.
Depending on operand kind, this is performed by either assembler or AMDGPU H/W (or both).</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="14%" />
<col width="15%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Expected type</th>
<th class="head">Required FP Type</th>
<th class="head">Conversion</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>i16, u16, b16</td>
<td>f16</td>
<td>f16(num)</td>
<td>Convert to f16 and use bits of the result as an integer value.</td>
</tr>
<tr class="row-odd"><td>i32, u32, b32</td>
<td>f32</td>
<td>f32(num)</td>
<td>Convert to f32 and use bits of the result as an integer value.</td>
</tr>
<tr class="row-even"><td>i64, u64, b64</td>
<td>-</td>
<td>-</td>
<td>Conversion disabled.</td>
</tr>
<tr class="row-odd"><td>f16</td>
<td>f16</td>
<td>f16(num)</td>
<td>Convert to f16.</td>
</tr>
<tr class="row-even"><td>f32</td>
<td>f32</td>
<td>f32(num)</td>
<td>Convert to f32.</td>
</tr>
<tr class="row-odd"><td>f64</td>
<td>f64</td>
<td>{num.u32.hi,0}</td>
<td><p class="first">Use high 32 bits of the number as high 32 bits of the result;
zero-fill low 32 bits of the result.</p>
<p class="last">Note that the result may differ from the original number.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples of enabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_f16</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3C00</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3C00</span>
                            <span class="o">//</span>
<span class="n">v_add_f32</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3F800000</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">v_add_u32</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3F800000</span>

                            <span class="o">//</span> <span class="n">src0</span> <span class="n">before</span> <span class="n">conversion</span><span class="p">:</span>
                            <span class="o">//</span>   <span class="mf">1.7976931348623157e308</span> <span class="o">=</span> <span class="mh">0x7fefffffffffffff</span>
                            <span class="o">//</span> <span class="n">src0</span> <span class="n">after</span> <span class="n">conversion</span><span class="p">:</span>
                            <span class="o">//</span>   <span class="mf">1.7976922776554302e308</span> <span class="o">=</span> <span class="mh">0x7fefffff00000000</span>
<span class="n">v_ceil_f64</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mf">1.7976931348623157e308</span>

<span class="n">v_add_f16</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65500.0</span><span class="p">,</span> <span class="n">v2</span>   <span class="o">//</span> <span class="n">ok</span> <span class="k">for</span> <span class="n">f16</span><span class="o">.</span>
<span class="n">v_add_f32</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65600.0</span><span class="p">,</span> <span class="n">v2</span>   <span class="o">//</span> <span class="n">ok</span> <span class="k">for</span> <span class="n">f32</span><span class="p">,</span> <span class="n">but</span> <span class="n">would</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">overflow</span> <span class="k">for</span> <span class="n">f16</span><span class="o">.</span>
</pre></div>
</div>
<p>Examples of disabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_f16</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65600.0</span><span class="p">,</span> <span class="n">v2</span>    <span class="o">//</span> <span class="n">overflow</span>
</pre></div>
</div>
</div>
<div class="section" id="conversion-of-relocatable-values">
<span id="amdgpu-synid-rl-conv"></span><h3><a class="toc-backref" href="#id45">Conversion of Relocatable Values</a><a class="headerlink" href="#conversion-of-relocatable-values" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">Relocatable expressions</span></a>
may be used with 32-bit integer operands and jump targets.</p>
<p>When the value of a relocatable expression is resolved by a linker, it is
converted as needed and truncated to the operand size. The conversion depends
on <a class="reference internal" href="AMDGPUUsage.html#amdgpu-relocation-records"><span class="std std-ref">relocation type</span></a> and operand kind.</p>
<p>For example, when a 32-bit operand of an instruction refers a relocatable expression <em>expr</em>,
this reference is evaluated to a 64-bit offset from the address after the
instruction to the address being referenced, <em>counted in bytes</em>.
Then the value is truncated to 32 bits and encoded as a literal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expr</span> <span class="o">=</span> <span class="o">.</span>
<span class="n">v_add_co_u32_e32</span> <span class="n">v0</span><span class="p">,</span> <span class="n">vcc</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">v1</span>  <span class="o">//</span> <span class="s1">&#39;expr&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">4</span>
                                    <span class="o">//</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">truncated</span> <span class="n">to</span> <span class="mh">0xFFFFFFFC</span>
</pre></div>
</div>
<p>As another example, when a branch instruction refers a label,
this reference is evaluated to an offset from the address after the
instruction to the label address, <em>counted in dwords</em>.
Then the value is truncated to 16 bits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">label</span><span class="p">:</span>
<span class="n">s_branch</span> <span class="n">label</span>  <span class="o">//</span> <span class="s1">&#39;label&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">truncated</span> <span class="n">to</span> <span class="mh">0xFFFF</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="AMDGPUInstructionSyntax.html" title="AMDGPU Instruction Syntax"
             >next</a> |</li>
        <li class="right" >
          <a href="AMDGPUModifierSyntax.html" title="Syntax of AMDGPU Instruction Modifiers"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" >User Guides</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="AMDGPUUsage.html" >User Guide for AMDGPU Backend</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2003-2020, LLVM Project.
      Last updated on 2020-03-24.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>