
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>clang-tidy - bugprone-misplaced-widening-cast &#8212; Extra Clang Tools 10 documentation</title>
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/clang-tools-extra-styles.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="bugprone-move-forwarding-reference" href="bugprone-move-forwarding-reference.html" />
    <link rel="prev" title="bugprone-misplaced-operator-in-strlen-in-alloc" href="bugprone-misplaced-operator-in-strlen-in-alloc.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>Extra Clang Tools 10 documentation</span></a></h1>
        <h2 class="heading"><span>clang-tidy - bugprone-misplaced-widening-cast</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="bugprone-misplaced-operator-in-strlen-in-alloc.html">bugprone-misplaced-operator-in-strlen-in-alloc</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="bugprone-move-forwarding-reference.html">bugprone-move-forwarding-reference</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="bugprone-misplaced-widening-cast">
<h1>bugprone-misplaced-widening-cast<a class="headerlink" href="#bugprone-misplaced-widening-cast" title="Permalink to this headline">¶</a></h1>
<p>This check will warn when there is a cast of a calculation result to a bigger
type. If the intention of the cast is to avoid loss of precision then the cast
is misplaced, and there can be loss of precision. Otherwise the cast is
ineffective.</p>
<p>Example code:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="kt">long</span><span class="p">)(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The result <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">1000</span></code> is first calculated using <code class="docutils literal notranslate"><span class="pre">int</span></code> precision. If the
result exceeds <code class="docutils literal notranslate"><span class="pre">int</span></code> precision there is loss of precision. Then the result is
casted to <code class="docutils literal notranslate"><span class="pre">long</span></code>.</p>
<p>If there is no loss of precision then the cast can be removed or you can
explicitly cast to <code class="docutils literal notranslate"><span class="pre">int</span></code> instead.</p>
<p>If you want to avoid loss of precision then put the cast in a proper location,
for instance:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">x</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="section" id="implicit-casts">
<h2>Implicit casts<a class="headerlink" href="#implicit-casts" title="Permalink to this headline">¶</a></h2>
<p>Forgetting to place the cast at all is at least as dangerous and at least as
common as misplacing it. If <a class="reference internal" href="#cmdoption-arg-checkimplicitcasts"><code class="xref std std-option docutils literal notranslate"><span class="pre">CheckImplicitCasts</span></code></a> is enabled the check
also detects these cases, for instance:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">long</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="floating-point">
<h2>Floating point<a class="headerlink" href="#floating-point" title="Permalink to this headline">¶</a></h2>
<p>Currently warnings are only written for integer conversion. No warning is
written for this code:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="nf">f</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">x</span> <span class="o">*</span> <span class="mf">10.0f</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="option">
<dt id="cmdoption-arg-checkimplicitcasts">
<code class="descname">CheckImplicitCasts</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-arg-checkimplicitcasts" title="Permalink to this definition">¶</a></dt>
<dd><p>If non-zero, enables detection of implicit casts. Default is non-zero.</p>
</dd></dl>

</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="bugprone-misplaced-operator-in-strlen-in-alloc.html">bugprone-misplaced-operator-in-strlen-in-alloc</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="bugprone-move-forwarding-reference.html">bugprone-move-forwarding-reference</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2020, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>