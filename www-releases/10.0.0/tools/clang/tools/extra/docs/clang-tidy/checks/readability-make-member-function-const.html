
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>clang-tidy - readability-make-member-function-const &#8212; Extra Clang Tools 10 documentation</title>
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/clang-tools-extra-styles.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="readability-misleading-indentation" href="readability-misleading-indentation.html" />
    <link rel="prev" title="readability-magic-numbers" href="readability-magic-numbers.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>Extra Clang Tools 10 documentation</span></a></h1>
        <h2 class="heading"><span>clang-tidy - readability-make-member-function-const</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="readability-magic-numbers.html">readability-magic-numbers</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="readability-misleading-indentation.html">readability-misleading-indentation</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="readability-make-member-function-const">
<h1>readability-make-member-function-const<a class="headerlink" href="#readability-make-member-function-const" title="Permalink to this headline">¶</a></h1>
<p>Finds non-static member functions that can be made <code class="docutils literal notranslate"><span class="pre">const</span></code>
because the functions don’t use <code class="docutils literal notranslate"><span class="pre">this</span></code> in a non-const way.</p>
<p>This check tries to annotate methods according to
<a class="reference external" href="https://isocpp.org/wiki/faq/const-correctness#logical-vs-physical-state">logical constness</a>
(not physical constness).
Therefore, it will suggest to add a <code class="docutils literal notranslate"><span class="pre">const</span></code> qualifier to a non-const
method only if this method does something that is already possible though the
public interface on a <code class="docutils literal notranslate"><span class="pre">const</span></code> pointer to the object:</p>
<ul class="simple">
<li>reading a public member variable</li>
<li>calling a public const-qualified member function</li>
<li>returning const-qualified <code class="docutils literal notranslate"><span class="pre">this</span></code></li>
<li>passing const-qualified <code class="docutils literal notranslate"><span class="pre">this</span></code> as a parameter.</li>
</ul>
<p>This check will also suggest to add a <code class="docutils literal notranslate"><span class="pre">const</span></code> qualifier to a non-const
method if this method uses private data and functions in a limited number of
ways where logical constness and physical constness coincide:</p>
<ul class="simple">
<li>reading a member variable of builtin type</li>
</ul>
<p>Specifically, this check will not suggest to add a <code class="docutils literal notranslate"><span class="pre">const</span></code> to a non-const
method if the method reads a private member variable of pointer type because
that allows to modify the pointee which might not preserve logical constness.
For the same reason, it does not allow to call private member functions
or member functions on private member variables.</p>
<p>In addition, this check ignores functions that</p>
<ul class="simple">
<li>are declared <code class="docutils literal notranslate"><span class="pre">virtual</span></code></li>
<li>contain a <code class="docutils literal notranslate"><span class="pre">const_cast</span></code></li>
<li>are templated or part of a class template</li>
<li>have an empty body</li>
<li>do not (implicitly) use <code class="docutils literal notranslate"><span class="pre">this</span></code> at all
(see <a class="reference external" href="readability-convert-member-functions-to-static.html">readability-convert-member-functions-to-static</a>).</li>
</ul>
<p>The following real-world examples will be preserved by the check:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">E1</span> <span class="p">{</span>
  <span class="n">Pimpl</span> <span class="o">&amp;</span><span class="n">getPimpl</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">int</span> <span class="o">&amp;</span><span class="n">get</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Calling a private member function disables this check.</span>
    <span class="k">return</span> <span class="n">getPimpl</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">E2</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="k">const</span> <span class="kt">int</span> <span class="o">*</span><span class="n">get</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="c1">// const_cast disables this check.</span>
  <span class="n">S</span> <span class="o">*</span><span class="nf">get</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">const_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">*&gt;</span><span class="p">(</span><span class="k">const_cast</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">C</span><span class="o">*&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">get</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>After applying modifications as suggested by the check, runnnig the check again
might find more opportunities to mark member functions <code class="docutils literal notranslate"><span class="pre">const</span></code>.</p>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="readability-magic-numbers.html">readability-magic-numbers</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="readability-misleading-indentation.html">readability-misleading-indentation</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2020, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>