

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>lld 10.0.0 Release Notes &#8212; lld 10 documentation</title>
    <link rel="stylesheet" href="_static/llvm.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Partitions" href="Partitions.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
<a href="index.html"><img src="_static/logo.png" alt="LLVM Documentation"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>
 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">lld 10.0.0 Release Notes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes">Breaking changes</a></li>
<li><a class="reference internal" href="#mingw-improvements">MinGW Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements">WebAssembly Improvements</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Partitions.html"
                        title="previous chapter">Partitions</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lld-10-0-0-release-notes">
<h1>lld 10.0.0 Release Notes<a class="headerlink" href="#lld-10-0-0-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id2">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements" id="id3">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes" id="id4">Breaking changes</a></li>
<li><a class="reference internal" href="#mingw-improvements" id="id5">MinGW Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements" id="id6">WebAssembly Improvements</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the lld linker, release 10.0.0.
Here we describe the status of lld, including major improvements
from the previous release. All lld releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
</div>
<div class="section" id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id2">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Permalink to this headline">¶</a></h2>
<div class="section" id="elf-improvements">
<h3><a class="toc-backref" href="#id3">ELF Improvements</a><a class="headerlink" href="#elf-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Glob pattern, which you can use in linker scripts or version scripts,
now supports <cite>` and `[!…]</cite>. Except character classes
(e.g. <cite>[[:digit:]]</cite>), lld’s glob pattern should be fully compatible
with GNU now. (<a class="reference external" href="https://github.com/llvm/llvm-project/commit/48993d5ab9413f0e5b94dfa292a233ce55b09e3e">r375051</a>)</li>
<li>New <code class="docutils literal notranslate"><span class="pre">elf32btsmipn32_fbsd</span></code> and <code class="docutils literal notranslate"><span class="pre">elf32ltsmipn32_fbsd</span></code> emulations
are supported.</li>
<li>Relax MIPS <code class="docutils literal notranslate"><span class="pre">jalr</span></code> and <code class="docutils literal notranslate"><span class="pre">jr</span></code> instructions marked by the <code class="docutils literal notranslate"><span class="pre">R_MIPS_JALR</span></code>
relocation.</li>
<li>For certain “undefined symbol” errors, a definition with a close spelling will be suggested.
(<a class="reference external" href="https://reviews.llvm.org/D67039">D67039</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code> is suggested if an undefined reference is mangled(unmangled) while there
is a likely unmangled(mangled) definition.
(<a class="reference external" href="https://reviews.llvm.org/D69592">D69592</a> <a class="reference external" href="https://reviews.llvm.org/D69650">D69650</a>)</li>
<li>New <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">noseparate-code</span></code>, <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">separate-code</span></code> and <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">separate-loadable-segments</span></code>.
<code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">noseparate-code</span></code> is the default, which can reduce sizes of linked binaries by up to
3 times maxpagesize.
(<a class="reference external" href="https://reviews.llvm.org/D64903">D64903</a> <a class="reference external" href="https://reviews.llvm.org/D67481">D67481</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">force-bti</span></code> and <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">pac-plt</span></code> are added for AArch64 Branch Target Identification and Pointer Authentication.
(<a class="reference external" href="https://reviews.llvm.org/D62609">D62609</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">--fix-cortex-a8</span></code> is added to fix erratum 657417.
(<a class="reference external" href="https://reviews.llvm.org/D67284">D67284</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">force-ibt</span></code> and <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">shstk</span></code> are added for Intel Control-flow Enforcement Technology.
(<a class="reference external" href="https://reviews.llvm.org/D59780">D59780</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">PT_GNU_PROPERTY</span></code> is added to help loaders locate the <code class="docutils literal notranslate"><span class="pre">.note.gnu.property</span></code> section.
It may be used by a future Linux kernel.
(<a class="reference external" href="https://reviews.llvm.org/D70961">D70961</a>)</li>
<li>For <code class="docutils literal notranslate"><span class="pre">--compress-debug-sections=zlib</span></code>, <code class="docutils literal notranslate"><span class="pre">-O0</span></code> and <code class="docutils literal notranslate"><span class="pre">-O1</span></code> enable compression level 1
while <code class="docutils literal notranslate"><span class="pre">-O2</span></code> enables compression level 6. <code class="docutils literal notranslate"><span class="pre">-O1</span></code> (default) is faster than before.
(<a class="reference external" href="https://reviews.llvm.org/D70658">D70658</a>)</li>
<li>Range extension thunks with addends are implemented for AArch64, PowerPC32 and PowerPC64.
(<a class="reference external" href="https://reviews.llvm.org/D70637">D70637</a> <a class="reference external" href="https://reviews.llvm.org/D70937">D70937</a>
<a class="reference external" href="https://reviews.llvm.org/D73424">D73424</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">R_RISCV_ALIGN</span></code> will be errored because linker relaxation for RISC-V is not supported.
Pass <code class="docutils literal notranslate"><span class="pre">-mno-relax</span></code> to disable <code class="docutils literal notranslate"><span class="pre">R_RISCV_ALIGN</span></code>.
(<a class="reference external" href="https://reviews.llvm.org/D71820">D71820</a>)</li>
<li>The ARM port will no longer insert interworking thunks for non STT_FUNC symbols.
(<a class="reference external" href="https://reviews.llvm.org/D73474">D73474</a>)</li>
<li>The quality of PowerPC32 port has been greatly improved (canonical PLT, copy
relocations, non-preemptible IFUNC, range extension thunks with addends).
It can link FreeBSD 13.0 userland.</li>
<li>The PowerPC64 port supports non-preemptible IFUNC.
(<a class="reference external" href="https://reviews.llvm.org/D71509">D71509</a>)</li>
<li>lld creates a RO PT_LOAD and a RX PT_LOAD without a linker script.
lld creates a unified RX PT_LOAD with a linker script.
A future release will eliminate this difference and use a RO PT_LOAD and a RX PT_LOAD by default.
The linker script case will require <code class="docutils literal notranslate"><span class="pre">--no-rosegment</span></code> to restore the current behavior.</li>
<li>GNU style compressed debug sections <code class="docutils literal notranslate"><span class="pre">.zdebug</span></code> (obsoleted by <code class="docutils literal notranslate"><span class="pre">SHF_COMPRESSED</span></code>)
are supported for input files, but not for the output.
A future release may drop <code class="docutils literal notranslate"><span class="pre">.zdebug</span></code> support.</li>
</ul>
</div>
<div class="section" id="breaking-changes">
<h3><a class="toc-backref" href="#id4">Breaking changes</a><a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-Ttext=$base</span></code> (base is usually 0) is no longer supported.
If PT_PHDR is needed, use <code class="docutils literal notranslate"><span class="pre">--image-base=$base</span></code> instead.
If PT_PHDR is not needed, use a linker script with <cite>.text 0 : { *(.text*) }</cite> as the first
output section description.
See <a class="reference external" href="https://bugs.llvm.org/show_bug.cgi?id=44715">https://bugs.llvm.org/show_bug.cgi?id=44715</a> for more information.
(<a class="reference external" href="https://reviews.llvm.org/D67325">D67325</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">-Ttext-segment</span></code> is no longer supported. Its meaning was different from GNU ld’s and
could cause subtle bugs.
(<a class="reference external" href="https://reviews.llvm.org/D70468">D70468</a>)</li>
</ul>
</div>
<div class="section" id="mingw-improvements">
<h3><a class="toc-backref" href="#id5">MinGW Improvements</a><a class="headerlink" href="#mingw-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow using custom .edata sections from input object files (for use
by Wine)
(<a class="reference external" href="https://reviews.llvm.org/rGdadc6f248868">dadc6f248868</a>)</li>
<li>Don’t implicitly create import libraries unless requested
(<a class="reference external" href="https://reviews.llvm.org/rG6540e55067e3">6540e55067e3</a>)</li>
<li>Support merging multiple resource object files
(<a class="reference external" href="https://reviews.llvm.org/rG3d3a9b3b413d">3d3a9b3b413d</a>)
and properly handle the default manifest object files that GCC can pass
(<a class="reference external" href="https://reviews.llvm.org/rGd581dd501381">d581dd501381</a>)</li>
<li>Demangle itanium symbol names in warnings/error messages
(<a class="reference external" href="https://reviews.llvm.org/rGa66fc1c99f3e">a66fc1c99f3e</a>)</li>
<li>Print source locations for undefined references and duplicate symbols,
if possible
(<a class="reference external" href="https://reviews.llvm.org/rG1d06d48bb346">1d06d48bb346</a>)
and
(<a class="reference external" href="https://reviews.llvm.org/rGb38f577c015c">b38f577c015c</a>)</li>
<li>Look for more filename patterns when resolving <code class="docutils literal notranslate"><span class="pre">-l</span></code> options
(<a class="reference external" href="https://reviews.llvm.org/rG0226c35262df">0226c35262df</a>)</li>
<li>Don’t error out on duplicate absolute symbols with the same value
(which can happen for the default-null symbol for weak symbols)
(<a class="reference external" href="https://reviews.llvm.org/rG1737cc750c46">1737cc750c46</a>)</li>
</ul>
</div>
<div class="section" id="webassembly-improvements">
<h3><a class="toc-backref" href="#id6">WebAssembly Improvements</a><a class="headerlink" href="#webassembly-improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><cite>__data_end</cite> and <cite>__heap_base</cite> are no longer exported by default,
as it’s best to keep them internal when possible. They can be
explicitly exported with <cite>–export=__data_end</cite> and
<cite>–export=__heap_base</cite>, respectively.</li>
<li>wasm-ld now elides .bss sections when the memory is not imported</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             >previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2020, LLVM Project.
      Last updated on 2020-03-24.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>